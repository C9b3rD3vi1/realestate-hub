<!-- Neighborhood Information Section -->
<div class="collapse collapse-plus bg-base-200 rounded-box shadow-md mt-6 transition-transform duration-300 hover:shadow-lg hover:scale-[1.01]">
  <input type="checkbox" class="peer"> 
  <div class="collapse-title text-lg font-semibold text-center peer-checked:bg-primary/10 peer-checked:text-primary transition-colors duration-300">
    Neighborhood Information
  </div>
  
  <div class="collapse-content transition-all duration-500 ease-in-out animate-fade-in">
    <div 
      x-data="{ scrollX: 0 }"
      x-init="setInterval(() => {
        scrollX += 1;
        $refs.scroll.scrollLeft = scrollX;
        if ($refs.scroll.scrollLeft + $refs.scroll.clientWidth >= $refs.scroll.scrollWidth) scrollX = 0;
      }, 30);"
      class="relative overflow-hidden"
    >
      <div 
        x-ref="scroll"
        class="flex gap-6 overflow-x-auto no-scrollbar scroll-smooth py-4"
      >
        {% for feature in neighborhood_features %}
        <div 
          class="feature-card flex flex-col items-center text-center p-4 bg-base-100 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 hover:-translate-y-1 opacity-0 translate-y-6 min-w-[200px] sm:min-w-[220px] md:min-w-[240px]"
          x-data
          x-intersect.once="el => setTimeout(() => el.classList.add('visible'), {{ forloop.counter0 }} * 100)"
        >
          <div class="p-3 rounded-full bg-primary/10 text-primary mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </div>
          <div class="font-bold text-lg">{{ feature.distance }}</div>
          <div class="text-sm text-gray-500">{{ feature.name }}</div>
        </div>
        {% empty %}
        <div class="col-span-4 text-gray-500 text-center py-6">No neighborhood information available</div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<!-- Custom Animations -->
<style>
@keyframes fade-in { 
  from { opacity: 0; transform: translateY(10px);} 
  to { opacity: 1; transform: translateY(0);} 
}
@keyframes fade-up { 
  from { opacity: 0; transform: translateY(15px);} 
  to { opacity: 1; transform: translateY(0);} 
}

.animate-fade-in { animation: fade-in 0.6s ease-in-out forwards; }
.animate-fade-up { animation: fade-up 0.7s ease-in-out forwards; }

/* Fade-in on scroll */
.feature-card.visible { 
  opacity: 1; 
  transform: translateY(0); 
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

/* Hide scrollbar cross-browser */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>
